---
title: "Final Project"
subtitle: "MATH 40024/50024: Computational Statistics"
date: October 19, 2023
output: pdf_document

fontfamily: mathpazo
fontsize: 11pt
header-includes:
   - \linespread{1.05}
urlcolor: blue
---

__ACADEMIC INTEGRITY: Every student should complete the project by their own. A project report having high degree of similarity with work by any other student, or with any other document (e.g., found online) is considered plagiarism, and will not be accepted. The minimal consequence is that the student will receive the project score of 0, and the best possible overall course grade will be D. Additional consequences are described at http://www.kent.edu/policyreg/administrative-policy-regarding-student-cheating-and-plagiarism and will be strictly enforced.__

## Instruction

__Goal:__ The goal of the project is to go through the complete data analysis workflow to answer questions about your chosen topic using a real-life dataset. You will need to acquire the data, munge and explore the data, perform statistical analysis, and communicate the results.

__Report:__ Use this Rmd file as a template. Edit the file by adding your project title in the YAML, and including necessary information in the four sections: (1) Introduction, (2) Computational Methods, (3) Data Analysis and Results, and (4) Conclusion. 

__Submission:__ Please submit your project report as a PDF file (8-10 pages, flexible) to Canvas by __11:59 p.m. on December 10__. The PDF file should be generated by "knitting" the Rmd file. You may choose to first generate an HTML file (by changing the output format in the YAML to `output: html_document`) and then convert it to PDF. __20 points will be deducted if the submitted files are in wrong format.__ 

__Grade:__ The project will be graded based on your ability to (1) recognize and define research questions suitable for data-driven, computational approaches, (2) use computational methods to analyze data, (3) appropriately document the process (with R code) and clearly present the results, and (4) draw valid conclusions supported by the data analysis.

__Example topics:__

* [Post-Hurricane Vital Statistics](https://www.biorxiv.org/content/10.1101/407874v2)
* [Tidy Tuesday](https://github.com/rfordatascience/tidytuesday)

__Datasets:__ I suggest to work on a dataset with at least thousands of observations and dozens of variables. You may consider (but are not restricted) to use the following data repositories: [Data.gov](https://catalog.data.gov/dataset), [Kaggle](https://www.kaggle.com/datasets), [FiveThirtyEight](https://data.fivethirtyeight.com/), [ProPublica](https://www.propublica.org/datastore/datasets), and [UCI Machine Learning Repository](https://archive.ics.uci.edu/ml/index.php)

\pagebreak

## Introduction [15 points]

* What research question(s) would you like to answer?

How has the distribution of sales ratios changed over the years, and can we identify significant trends or patterns?

Is there a spatial pattern in sales ratios across different towns? Are there specific areas where properties consistently sell above or below their assessed value?

What are the long-term appreciation trends for different property types? Can we identify property types that consistently appreciate in value over the years?




* Why a data-driven, computational approach may be useful to answer the questions?

It is possible that the dataset has complex correlations between different characteristics that are difficult to identify through human examination.

Many research topics take into account several variables at once, which makes manual multivariate analysis difficult to accomplish in-depth.

Large real estate datasets can need to be extensively processed in order to obtain insightful information.

Examining trends across time is an example of temporal analysis, which may be complex and entail finding patterns and seasonality.




* Describe the dataset that you choose. 

This dataset seems comprehensive and can be used for various analyses related to real estate transactions, such as property appreciation over time, sales trends in different towns, the impact of property types on sales ratios, and more.
Serial Number: Is just a unique set of digits to identify each transaction

List year: This is the year that the particular property was put up for sale.

Date Recorded: Is the date that the transaction was completed. That is, the year the property was bought.

Town: The town where this property is located.

Address: The property's address.

Assessed Value: How much the property is generally considered to be worth.

Sale Amount: How much the property was actually sold for.

Sales Ratio: The ratio measures how close the selling price of the property is to it's assessed value.

Property Type: What kind of property it is.

Residential Type: If it is a residential property, what type is it.

Years until sold: Number of years before the property was finally sold




## Computational Methods [30 points]

* For the choosen dataset, what are the necessary data wrangling steps to make the data ready for subsequent analyses?



```{r}
library(readr)
Real_Estate2 <- read_csv("C:/Users/ajayc/OneDrive/Desktop/Real_Estate_Sales_2001-2020_GL.csv")
Real_Estate2

#identify missing values
missing_values <- colSums(is.na(Real_Estate2))
#printing the missing values
missing_values
summary(Real_Estate2)

#identify duplicate rows
duplicate_rows <- Real_Estate2[duplicated(Real_Estate2), ]
duplicate_rows
```









* What exploratory analyses and modeling techniques can be used to answer the research questions?

To investigate the evolution of the sales ratio distribution over time and recognize significant trends or patterns, you might utilize a range of exploratory studies and modeling approaches.

Descriptive Statistics:
 Determine summary statistics (mean, median, and standard deviation) for sales ratios for every year using descriptive statistics.
Understanding: Determine the main trends and fluctuations in the sales ratios throughout several years.

Time Series Visualization: To see the trend in sales ratios over time, make time series plots or line charts.
Understanding: Determine the distribution's general patterns, seasonality, and any obvious tendencies.

Box Plots: To see how the sales ratios are distributed for every year, use box plots.
Understanding: Determine how the central tendency and spread of sales ratios vary over time.


Correlation Analysis:
Discover relationships between sales ratios and other pertinent factors (such as assessed value and selling amount) to gain valuable insights.
Understanding: Recognize the relationships between various causes and variations in sales ratios throughout time.

Cluster Analysis: Use clustering methods to put years with comparable sales ratio trends together.
Understanding

: Determine times when sales ratio patterns are comparable and maybe identify different market stages.




* What metrics will be used to evaluate the quality of the data analysis?

To evaluate the quality of the data analysis exploring the distribution of sales ratios over the years and identifying trends or patterns. The choice of metrics depends on the specific goals of your analysis and the methods used. 

Visual Inspection:

Metric: Clarity and Interpretability of Visualizations
Justification: Assess the degree of clarity in visual tools including kernel density charts, box plots, and time series plots. Make sure the data's trends and patterns are conveyed through the visuals.

Descriptive Statistics:

Metric: Consistency of Summary Statistics
Justification: Verify that the summary statistics (such as mean, median, and standard deviation) match the patterns seen in the visual aids. Look for any abnormalities or outliers.

Completeness of Reporting:

Metric: Comprehensive Reporting of Findings
Justification: Assess the thoroughness of the analysis by making sure that all pertinent results, patterns, and trends are presented in an understandable manner. Give the results' context and interpretations.



## Data Analysis and Results [40 points]

* Perform data analysis, document the analysis procedure, and evaluate the outcomes.

```{r}
Real_Estate1 <- as.data.frame(sapply(Real_Estate2, as.numeric))

hist(Real_Estate1$`List Year`)
hist(Real_Estate1$`Assessed Value`)
hist(Real_Estate1$`Sale Amount`)
hist(Real_Estate1$`Sales Ratio`)
hist(Real_Estate1$`Years until sold`)
```

```{r}
library(ggplot2)

ggplot(Real_Estate2, aes(x = Real_Estate2$`List Year`, y = Real_Estate2$`Sales Ratio`)) +
  geom_bar(stat = "identity", fill = "blue") +
  labs(title = "Sales Ratio by Year",
       x = "Year",
       y = "Sales Ratio") +
  theme_minimal()


ggplot(Real_Estate2, aes(x = Real_Estate2$`List Year`, y = Real_Estate2$`Years until sold`)) +
  geom_bar(stat = "identity", fill = "red") +
  labs(title = "Years until sold by year",
       x = "Year",
       y = "Year until Sold") +
  theme_minimal()

numerical_columns <- sapply(Real_Estate2, is.numeric)
numerical_data <- Real_Estate2[, numerical_columns]

# Compute the correlation matrix
correlation_matrix <- cor(numerical_data)

# Print the correlation matrix
print(correlation_matrix)


categorical_table <- table(Real_Estate2$`Residential Type`, Real_Estate2$`Property Type`)
categorical_table
# Perform the chi-square test
chi_square_result <- chisq.test(categorical_table)

# Print the chi-square test result
print(chi_square_result)



```

```{r}
Real_Estate_subset <- Real_Estate2[sample(nrow(Real_Estate2), 10000), ]


index=sample(2,nrow(Real_Estate_subset),replace = TRUE,prob = c(.80,.20))
train_set=Real_Estate_subset[index==1,]
test_set=Real_Estate_subset[index==2,]
train_set
test_set
library(caret)
library(ROCR)
library(caTools)

log_reg = glm(`Sales Ratio` ~., data = train_set, family = "binomial")
summary(log_reg)
plot(model,col="yellow")
predict_reg=predict(log_reg,newdata=test_set, type = "response")
predict_reg=ifelse(predict_reg>0.5,"satisfied","dissatisfied")
table(predict_reg)
table(predict_reg,Airlines$Satisfaction)



# Example: Using a random sample of 10,000 rows
Real_Estate_subset <- Real_Estate2[sample(nrow(Real_Estate2), 10000), ]

# Fit the model on the subset
model <- glm(`Sales Ratio` ~ ., data = Real_Estate_subset, family = 'binomial')

```









```{r}
model <- glm(`Sales Ratio` ~., data = Real_Estate2,family = 'binomial')
summary(model)


# Example: Using a random sample of 10,000 rows
Real_Estate_subset2 <- Real_Estate2[sample(nrow(Real_Estate2), 10000), ]

# Fit the model on the subset
model2 <- glm(`Sales Ratio` ~ ., data = Real_Estate_subset2, family = 'binomial')
# Example: Exclude the 'Serial Number' and 'Address' variables
model2 <- glm(`Sales Ratio` ~ . - SerialNumber - Address, data = Real_Estate2, family = 'binomial')
# Example: Set memory limit to 8 GB
memory.limit(size = 8000)
```


```{r}

library(caTools)


set.seed(10000)  
split_ratio = 0.7
split = sample.split(Real_Estate2$`Sales Ratio`, SplitRatio = split_ratio)
train_data = subset(Real_Estate2, split == TRUE)
test_data = subset(Real_Estate2, split == FALSE)

# Create a linear regression model
model2 = lm(Real_Estate2$`Sales Ratio` ~Real_Estate2$`List Year`, data = Real_Estate2)

# Summary of the model
summary(model2)

predictions = predict(model2, newdata =Real_Estate2)
head(predictions)
plot(model,col="blue")

```


```{r}
ggplot(Real_Estate, aes(x = factor(`List Year`), y = `Sales Ratio`)) +
  geom_boxplot() +
  labs(title = "Box Plot of Sales Ratios for Each Year",
       x = "Year",
       y = "Sales Ratio") +
  theme_minimal()


ggplot(Real_Estate, aes(x = `List Year`, y = `Sales Ratio`)) +
  geom_line() +
  labs(title = "Time Series Plot of Sales Ratios Over the Years",
       x = "Year",
       y = "Sales Ratio") +
  theme_minimal()

ggplot(Real_Estate, aes(x = `Sales Ratio`)) +
  geom_density() +
  labs(title = "Kernel Density Estimation (KDE) Plot for Sales Ratios",
       x = "Sales Ratio",
       y = "Density") +
  theme_minimal()

anova_result <- aov(`Sales Ratio` ~ factor(`List Year`), data = Real_Estate)
summary(anova_result)

tukey_result <- TukeyHSD(anova_result)
summary(tukey_result)






```


* Present the data analysis results.

```{r}


```

* Interpret the results in a way to address the research questions.

## Conclusion [15 points]

* Does the analysis answer the research questions? 
* Discuss the scope and generalizability of the analysis. 
* Discuss potential limitations and possibilities for improvement.
